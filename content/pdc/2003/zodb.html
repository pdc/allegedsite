<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'
'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns="http://www.w3.org/1999/xhtml">
  <!-- Generated from subjects.th on 2007-03-28 22:24 BST -->
  <!-- with command: cd /Users/pdc/th/alleged.org.uk/pdc/2003;
  /Users/pdc/bin/thc -r /Users/pdc/Sites/alleged.org.uk/ -s pdc/2003 subjects.th -->
  <!-- htmlProcs.tcl version 5.1.8 -->
  <head>
    <title>ZODB - Topics - Alleged Literature</title>
    <link href="../pdc.css" rel="alternate stylesheet" type="text/css" title="Spirals" />
    <link href="../2005/gentium.css" rel="stylesheet" type="text/css" arg0="title=Gentium" title="Gentium" />
    <link href="../2005/lod.css" rel="alternate stylesheet" type="text/css" title="Light on Dark" />
    
    <!--[if lte IE 6]>
    <link rel="stylesheet" type="text/css" href="../2005/gentium-ie6.css" title="Gentium" />
    <![endif]-->
    
    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
  </head>
  <body>
    <p class="trail">
      <a href="../.."><img src="../../img/alleged-03@32x16.png" align="absmiddle" alt="Alleged Literature" width="32" height="16" border="0" /></a> &gt;&gt;
      <a href="../">pdc</a> &gt;&gt;
      <a href="./">2003</a> &gt;&gt;
      <a &gt;&gt;
      href="subjects.html">topics</a> &gt;&gt;
      <strong>zodb</strong>
    </p>
    <div id="body">
      <h1>Alleged Topic: ZODB</h1>
      <div class="entry">
        <h2><a name="e20030517" id="e20030517">Backslashes in URLs</a></h2>
        <p class="details">17 May 2003</p>
        <div class="details">
          <h3>Topics</h3>
          <ul class="topics">
            <li><a href="picky.html">Picky Picky Game</a></li>
            <li><strong><abbr title="Z Object Database">ZODB</abbr></strong></li>
          </ul>
        </div>
        <p class="details permalink">
          <a href="../2003/05/17.html#e20030517" title="Permanent URL for this entry">#</a>
        </p>
        <div class="content">
    <div><a href="../2003/picky.html"><img src="../2003/../icon-64x64.png" class="initial" alt="" align="left" width="64" height="64" border="0" /></a></div><p class="first">
      Had a bug in the <a href="../2003/picky.html">Picky Picky Game</a> where
      uploaded pictures might have backslashes left in their names
      (the picture name being derived from the file name supplied by
      the client computer).  Technically it is OK to have backslashes
      in a 
      <abbr title="Uniform Resource-Locator">URL</abbr>, and they should
      be treated like any other character.  Some web browsers
      second-guess you, however, and replace backslashes with slashes
      (<code>http://foo/bar\baz</code> is treated as
      <code>http://foo/bar/baz</code>), with the result that these
      pictures failed to appear.    
    </p>
    <p>
      The solution is, of course, to (a)&nbsp;change the code for
      translating file names in to picture names so that it removes
      backslashes, and (b)&nbsp;fix the existing databases.
      ZODB makes the second part pretty easy; having acquired a
      <code>Game</code> instance from the databse, you just run a
      script like
    </p>
    <pre>for rn, r in game.rounds.items():
    for pic in r.pictures:
	s = r.sanitizedName(pic.name, pic)
	if s != pic.name:
	    pic.name = s
	    pic.dataUri = s + picky.mediaTypeSuffix(pic.mediaType)</pre>
    <p>
      The function <code>sanitizedName</code> is the one that has to
      be fixed for part (a).
    </p>
  
        </div>
      </div>
      <h2>Older entries</h2>
      <ul>
        <li>
          <a href="../2003/05/14.html#e20030514" title="Permanent URL for this entry">ZODB: don&rsquo;t forget to close connections</a>
          14 May 2003
        </li>
        <li>
          <a href="../2002/11.html#e20021118b" title="Permanent URL for this entry">ZEO just works</a>
          18 November 2002
        </li>
      </ul>
    </div>
    <div class="links">
      <h3>Archives</h3>
      <ul>
        <li><a href="../2006/topics.html">by topic</a></li>
        <li><a href="../2007/">2007</a></li>
        <li><a href="../2006/">2006</a></li>
        <li><a href="../2005/">2005</a></li>
        <li><a href="../2004/">2004</a></li>
        <li><a href="../2003/12/">December 2003</a></li>
        <li><a href="../2003/11/">November 2003</a></li>
        <li><a href="../2003/10/">October 2003</a></li>
        <li><a href="../2003/09/">September 2003</a></li>
        <li><a href="../2003/08/">August 2003</a></li>
        <li><a href="../2003/07/">July 2003</a></li>
        <li><a href="../2003/06/">June 2003</a></li>
        <li><a href="../2003/05/">May 2003</a></li>
        <li><a href="../2003/04.html">April 2003</a></li>
        <li><a href="../2003/03.html">March 2003</a></li>
        <li><a href="../2003/02.html">February 2003</a></li>
        <li><a href="../2003/01.html">January 2003</a></li>
        <li><a href="../2002/">2002</a></li>
        <li><a href="../2001/">2001</a></li>
        <li><a href="../2000/">2000</a></li>
        <li><a href="../1999/">1999</a></li>
        <li><a href="../1998/">1998</a></li>
        <li><a href="../1997/">1997</a></li>
      </ul>
    </div>
    <div class="links">
      <p><a title="Link to an XML summary in RSS 2.0 format" href="../rss091.xml" type="text/xml"><img src="../../img/xml.gif" alt="XML" width="36" height="14" border="0" /></a></p>
      <p><a title="Check this page for conformance to XHTML 1.0" href="http://validator.w3.org/check/referer"><img src="../../img/valid-xhtml10.png" alt="Valid XHTML 1.0!" height="31" width="88" border="0" /></a></p>
      <p id="squidcredit"><a title="Background pattern taken from the squidfingers.com collection" href="http://squidfingers.com/patterns/">bg by squidfingers</a></p>
      <p id="jennicredit"><a title="Photograph used in the masthead taken by Jenni Scott in the ROTA club in April 2003" href="http://www.flickr.com/photos/jinty/">photo by Jenni Scott</a></p>
    </div>
  </body>
</html>
