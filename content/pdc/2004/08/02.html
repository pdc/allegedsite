<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'
'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns="http://www.w3.org/1999/xhtml">
  <!-- Generated from index.th on 2007-03-28 22:28 BST -->
  <!-- with command: cd /Users/pdc/th/alleged.org.uk/pdc/2004/08;
  /Users/pdc/bin/thc -r /Users/pdc/Sites/alleged.org.uk/ -s pdc/2004/08 index.th -->
  <!-- htmlProcs.tcl version 5.1.8 -->
  <head>
    <title>Demand-dialled modem configuration on Debian (Sarge) - Damian Cugley - Alleged Literature</title>
    <link href="../../pdc.css" rel="alternate stylesheet" type="text/css" title="Spirals" />
    <link href="../../2005/gentium.css" rel="stylesheet" type="text/css" arg0="title=Gentium" title="Gentium" />
    <link href="../../2005/lod.css" rel="alternate stylesheet" type="text/css" title="Light on Dark" />
    
    <!--[if lte IE 6]>
    <link rel="stylesheet" type="text/css" href="../../2005/gentium-ie6.css" title="Gentium" />
    <![endif]-->
    
    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
  </head>
  <body>
    <p class="trail">
      <a href="../../.."><img src="../../../img/alleged-03@32x16.png" align="absmiddle" alt="Alleged Literature" width="32" height="16" border="0" /></a> &gt;&gt;
      <a href="../../">pdc</a> &gt;&gt;
      <a href="../">2004</a> &gt;&gt;
      <a href="./">08</a> &gt;&gt;
      <strong>02</strong>
    </p>
    <div id="body">
      <h1>Alleged Archive</h1>
      <p id="tagline">Damian Cugley’s web site</p>
      <div class="entry">
        <h2><a name="e20040802" id="e20040802">Demand-dialled modem configuration on Debian (Sarge)</a></h2>
        <p class="details">2 August 2004</p>
        <div class="details">
          <h3>Topics</h3>
          <ul class="topics">
            <li><a href="../../2003/modem.html">modem</a></li>
            <li><a href="../../2003/debian.html">debian</a></li>
          </ul>
        </div>
        <p class="details permalink">
          <a href="#e20040802" title="Permanent URL for this entry">#</a>
        </p>
        <div class="content">

<div></div><p class="first">Debian GNU/Linux has excellent configuration dialogues for almost every
   aspect of the newly installed operating system. One fly in the ointment
   is that – just as when I installed Red Hat 6.1 six years ago – they do
   not account for people who might want their sysem to automatically dial
   up to the internet on demand. (For the sake of Google, I mention the
   terms
   <em>auto-dial</em>, <em>autodial</em>, and <em>intermittent connection</em>.) 
</p>
<p>Nowadays if one is configuring a PPP connection, chances are excellent
   that one’s ISP is the other peer, in which case demand-dial is surely
   the obvious choice (unless there is some subtle problem with it I am unaware
   of). As it is it seems the only way is, after running <code>pppconfig</code>, to
   enable demand-dialling, one must read the <code>pppd</code> documentation and then
   edit <code>/etc/ppp/peers/provider</code> by hand to add <code>demand</code> and <code>idle</code>
   keywords. 
</p>
<p>One great advantage of demand-dialling is that it simplifies the rest of
   the configuration. For example, I use <em>my</em> modem to connect to <a href="http://www.demon.net/">Demon
Internet</a> to collect mail and for that I need to set my PPP
   connection to (a) not be <code>defaultroute</code>, and (b) to route packets for
   <a href="http://www.demon.net/helpdesk/faq/server_address.shtml" title="Server addresses for Demon Internet">Demon’s SMTP servers</a> to the modem (rather than via my broadband
   gateway). This is because Demon uses SMTP to send me my mail, triggered
   by my modem dial-up, and restricted to the modem connection for security
   reasons. 
</p>
<p>Now <em>without</em> demand dialling, this is tricky: you cannot use Debian’s
   standard repository for network info, <code>/etc/network/interfaces</code>, because
   the <code>pppd</code> command cannot instantly enable the interface, and so the
   <code>on</code> commands in the <code>interfaces</code> file will fail; as a result, I was
   instructed to create scripts in <code>/etc/ppp/if-up.d</code>, which is a
   nontrivial proposition. I wasted several evenings over this (and
   eliminating red herrings like <code>wvdial</code>). But with demand dialling, I can
   create routes via <code>/etc/network/interfaces</code> and it all just works. Yay!
</p>
<p>Now all I need to do is add a configuration file for hot-plug events
   (my modem is on a PC Card) and add a <code>cron</code> job to ping
   <code>demon-du.demon.co.uk</code> once a day to cause the demand dialler to dial
   Demon.
</p>


        </div>
      </div>
    </div>
    <div class="links">
      <h3>Archives</h3>
      <ul>
        <li><a href="../../2006/topics.html">by topic</a></li>
        <li><a href="../../2007/03/">March 2007</a></li>
        <li><a href="../../2007/02/">February 2007</a></li>
        <li><a href="../../2006/">2006</a></li>
        <li><a href="../../2005/">2005</a></li>
        <li><a href="../../2004/">2004</a></li>
        <li><a href="../../2003/">2003</a></li>
        <li><a href="../../2002/">2002</a></li>
        <li><a href="../../2001/">2001</a></li>
        <li><a href="../../2000/">2000</a></li>
        <li><a href="../../1999/">1999</a></li>
        <li><a href="../../1998/">1998</a></li>
        <li><a href="../../1997/">1997</a></li>
      </ul>
    </div>
    <div class="links">
      <p><a title="Link to an XML summary in RSS 2.0 format" href="../../rss091.xml" type="text/xml"><img src="../../../img/xml.gif" alt="XML" width="36" height="14" border="0" /></a></p>
      <p><a title="Check this page for conformance to XHTML 1.0" href="http://validator.w3.org/check/referer"><img src="../../../img/valid-xhtml10.png" alt="Valid XHTML 1.0!" height="31" width="88" border="0" /></a></p>
      <p id="squidcredit"><a title="Background pattern taken from the squidfingers.com collection" href="http://squidfingers.com/patterns/">bg by squidfingers</a></p>
      <p id="jennicredit"><a title="Photograph used in the masthead taken by Jenni Scott in the ROTA club in April 2003" href="http://www.flickr.com/photos/jinty/">photo by Jenni Scott</a></p>
    </div>
  </body>
</html>
