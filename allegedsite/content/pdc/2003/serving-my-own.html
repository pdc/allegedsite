<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'
'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns="http://www.w3.org/1999/xhtml">
  <!-- Generated from serving-my-own.th on 2006-11-02 08:49 GMT -->
  <!-- with command: cd /Users/pdc/th/alleged.org.uk/pdc/2003;
  /Users/pdc/bin/thc -r /Users/pdc/Sites/alleged.org.uk/ -s pdc/2003 serving-my-own.th -->
  <!-- htmlProcs.tcl version 5.1.8 -->
  <head>
    <title>Serving my own damn' files - Alleged Literature</title>
    <link href="../pdc.css" rel="alternate stylesheet" type="text/css" title="Spirals" />
    <link href="../2005/gentium.css" rel="stylesheet" type="text/css" arg0="title=Gentium" title="Gentium" />
    <link href="../2005/lod.css" rel="alternate stylesheet" type="text/css" title="Light on Dark" />
    
    <!--[if lte IE 6]>
    <link rel="stylesheet" type="text/css" href="../2005/gentium-ie6.css" title="Gentium" />
    <![endif]-->
    
    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
  </head>
  <body>
    <p class="trail">
      <a href="../.."><img src="../../img/alleged-03@32x16.png" align="absmiddle" alt="Alleged Literature" width="32" height="16" border="0" /></a> &gt;&gt;
      <a href="../">pdc</a> &gt;&gt;
      <a href="./">2003</a> &gt;&gt;
      <strong>serving-my-own</strong>
    </p>
    <div id="body">
      <h1>Serving my own damn&rsquo; files</h1>
      <p id="tagline">Damian Cugleyâ€™s Weblog</p>
      
      <p class="article">
      I am rethinking my original plan for the <a
      href="picky.html">Picky Picky Game</a>, which was to store
      resoures in files as often as possible.  For example,
      <code>index.html</code> is a static file (not dynamically
      generated every time someone visits it).  This requires that
      when something happens that means <code>index.html</code> should
      change, this file has to be updated.
      </p>
      <h2>Why use files?</h2>
      <p>
      Many web applications are so paranoid about a cached page
      turning up and runining a demo that they turn on every
      cache-busting flag and ensure that every page is generated from
      scratch every time it is visited.  This makes development
      simpler but will present problems later.  It is exacerbated by
      the VB programmer&rsquo;s conviction that all data must be
      stored in an <abbr title="relational-database
      management-system">RDBMS</abbr>.  So why do I want to store
      pictures and even dynamically generated HTML in files instead?
      </p>
      <p>
      The advantage of using files as often as possible
      it puts the minimum load on the web server.
      Experience with web applications produced with <abbr
      title="ActiveX Server Pages">ASP</abbr>, webclasses, and ASP
      .NET is that you eventually start worrying about scalability and
      realize that you are committed to doing a lot of processing to
      deliver every page served.  Servers like Microsoft <abbr
      title="Internet Information Server">IIS</abbr> are said to have
      a &lsquo;fast paper path&rsquo; for resources served from static
      files (because this is how you win web-server benchmarks).  In
      one case we had panic around the office because serving the
      home page of a site had jumped from 3 to  40&nbsp;seconds after
      an upgrade to the software.  Three seconds was arguably already
      far too slow.
      </p>
      <p>
      The main disadvantage of using plain old files is that
      I&nbsp;have to be careful that my application updates the disc
      files when something changes.  If you have designed your
      application on the assumption that all pages are generated
      on-the-fly, then you may have designed them in a way that make
      this very difficult.  For example, the navigation section of a
      page might be generated automatically from information about
      other pages it references; changing one page&rsquo;s title might
      change umpteen other pages where they refer to it, making it
      hard to work out which disc files need to be regenerated.  The
      dependencies between pages either need to be carefully planned
      or automatically divined by the system, and it is very easy to
      make this very hard.
      </p>
      
      <h2>The fly in the ointment</h2>
      <p>
      This all assumes  that the web server is <em>allowed</em> to update its
      own files, which may actually not be the case.  This is the
      trouble I am struggling with in deploying <abbr title="Picky
      Picky Game">PPG</abbr> on <a
      href="http://caption.org/2003/sample/">CAPTION.org</a>: the web
      server is not permitted to write files (a fairly sensible
      security precaution, though inconvenient to me).
      </p>
      <p>
      So I plan to get around the problem by changing this so that the
      resources that are created or edited by the web application will
      live in the object database that is already used for storing
      information about the game.  This means that I&nbsp;need to add
      support for <code>If-Modified-Since</code> and
      <code>Content-Length</code> and sundry other HTTP headers that
      hitherto I could rely on the host web server to worry about.  It
      also means that unless I rethink the
      <abbr title="Universal Resource Locator">URL</abbr> design again
      I&nbsp;will end up with everything being delivered via the CGI
      script, which will slow down the whole system.  Sigh.
      </p>
      
      <p><a href="04.html#e20030429">29 April 2003</a></p>
    </div>
    <div class="links">
      <h3>Archives</h3>
      <ul>
        <li><a href="../2006/topics.html">by topic</a></li>
        <li><a href="../2006/">2006</a></li>
        <li><a href="../2005/">2005</a></li>
        <li><a href="../2004/">2004</a></li>
        <li><a href="../2003/12/">December 2003</a></li>
        <li><a href="../2003/11/">November 2003</a></li>
        <li><a href="../2003/10/">October 2003</a></li>
        <li><a href="../2003/09/">September 2003</a></li>
        <li><a href="../2003/08/">August 2003</a></li>
        <li><a href="../2003/07/">July 2003</a></li>
        <li><a href="../2003/06/">June 2003</a></li>
        <li><a href="../2003/05/">May 2003</a></li>
        <li><a href="../2003/04.html">April 2003</a></li>
        <li><a href="../2003/03.html">March 2003</a></li>
        <li><a href="../2003/02.html">February 2003</a></li>
        <li><a href="../2003/01.html">January 2003</a></li>
        <li><a href="../2002/">2002</a></li>
        <li><a href="../2001/">2001</a></li>
        <li><a href="../2000/">2000</a></li>
        <li><a href="../1999/">1999</a></li>
        <li><a href="../1998/">1998</a></li>
        <li><a href="../1997/">1997</a></li>
      </ul>
    </div>
    <div class="links">
      <p><a title="Link to an XML summary in RSS 2.0 format" href="../rss091.xml" type="text/xml"><img src="../../img/xml.gif" alt="XML" width="36" height="14" border="0" /></a></p>
      <p><a title="Check this page for conformance to XHTML 1.0" href="http://validator.w3.org/check/referer"><img src="../../img/valid-xhtml10.png" alt="Valid XHTML 1.0!" height="31" width="88" border="0" /></a></p>
      <p id="squidcredit"><a title="Background pattern taken from the squidfingers.com collection" href="http://squidfingers.com/patterns/">bg by squidfingers</a></p>
      <p id="jennicredit"><a title="Photograph used in the masthead taken by Jenni Scott in the ROTA club in April 2003" href="http://www.flickr.com/photos/jinty/">photo by Jenni Scott</a></p>
    </div>
  </body>
</html>
