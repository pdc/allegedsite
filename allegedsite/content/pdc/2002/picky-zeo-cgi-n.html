<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'
'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns="http://www.w3.org/1999/xhtml">
  <!-- Generated from picky-zeo-cgi.th on 2004-02-08 23:27 GMT -->
  <!-- with command: cd /hda6/home/pdc/th/tuschin/pdc/2002;
  /home/pdc/bin/thc -r /home/pdc/public_html/tuschin/ -s pdc/2002 picky-zeo-cgi.th -->
  <!-- htmlProcs.tcl version 5.1.7 -->
  <head>
    <title>Picky Picky Game: ZEO + CGI - Alleged Literature</title>
    <link href="../pdc.css" rel="stylesheet" type="text/css" />
    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
  </head>
  <body>
    <p class="trail">
      <a href="../..">Alleged Literature</a> &gt;&gt;
      <a href="../">pdc</a> &gt;&gt;
      <a href="./">2002</a> &gt;&gt;
      <strong>picky-zeo-cgi</strong>
    </p>
    <div id="body">
      <h1>Picky Picky Game: ZEO + CGI</h1>

<p>
      Even in a toy web application like the Picky Picky Game, it is
      possible (but unlikely) that two people will want to upload a
      picture at (nearly) the exact same moment.  If two processes try
      to write the same file at the same time, the results could be a
      mess.  It follows that we need to include something to
      co-ordinate the changes.
      </p>
      <p>
      If this application were all running
      as a single-process, multi-threaded web server (as <a
      href="http://www.zope.org/"><abbr title="the Z Object
      Programming Environment">ZOPE</abbr></a> does), then this would
      be easily done with <a href="http://zodb.sourceforge.net/"><abbr
      title="the Z Object Database">ZODB</abbr></a>, but, alas!
      I am still stubbornly trying to implement this as a
      <a href="http://hoohoo.ncsa.uiuc.edu/cgi/interface.html"><abbr title="Common Gateway Interface">CGI</abbr></a>
      script, and <abbr title="the Z Object Database">ZODB</abbr>
      cannot co-ordinate transactions between different processes.
      </p>
      <p>
      I thought that <abbr title="ZOPE Enterprise Objects">ZEO</abbr>
      might fix this&mdash;it manages a <abbr title="the Z Object
      Database">ZODB</abbr> database that can be shared between many
      servers, which should make it more than adequate for monitoring
      separate processes on the same server.  And everything works
      fine when I run test scripts at the command line, but, at
      first it failed when the script is invoked as a <abbr
      title="Common Gateway Interface">CGI</abbr>.
      </p>
      <p>
      At this point
      I was wondering what to try next&mdash;stop using <abbr
      title="Common Gateway Interface">CGI</abbr> (write my sever
      using Python&rsquo;s own HTTPServer module, or as a <a
      href="http://www.twistedmatrix.com/">Twisted</a> application, or
      ...), write my own co-ordination server, etc.  Then it occurred
      to me that my <abbr title="ZOPE Enterprise Objects">ZEO</abbr>
      instance was bound to a Unix-domain socket, and since <abbr
      title="Common Gateway Interface">CGI</abbr> runs using the
      <code>nobody</code> <abbr title="user identifier">uid</abbr>, it
      could not connect to that socket (because of file-system
      permissions).  So I tried switching to using a <a href="http://ietf.org/rfc/rfc793.txt"><abbr
      title="Transmission-Control Protocol">TCP</abbr></a> socket instead,
      and it works!  Yay!
      </p>

<p><a href="11.html#e20021117">17 November 2002</a></p>
    </div>
    <dl class="links">
      <dt class="FirstChild">Archives</dt>
      <dd><a href="../2003/subjects-n.html">by topic</a></dd>
      <dd><a href="../2004/">2004</a></dd>
      <dd><a href="../2003/">2003</a></dd>
      <dd><a href="../2002/12-n.html">December 2002</a></dd>
      <dd><a href="../2002/11-n.html">November 2002</a></dd>
      <dd><a href="../2002/10-n.html">October 2002</a></dd>
      <dd><a href="../2002/09-n.html">September 2002</a></dd>
      <dd><a href="../2002/08-n.html">August 2002</a></dd>
      <dd><a href="../2002/07-n.html">July 2002</a></dd>
      <dd><a href="../2002/06-n.html">June 2002</a></dd>
      <dd><a href="../2002/05-n.html">May 2002</a></dd>
      <dd><a href="../2002/04-n.html">April 2002</a></dd>
      <dd><a href="../2002/03-n.html">March 2002</a></dd>
      <dd><a href="../2002/02-n.html">February 2002</a></dd>
      <dd><a href="../2002/01-n.html">January 2002</a></dd>
      <dd><a href="../2001/">2001</a></dd>
      <dd><a href="../2000/">2000</a></dd>
      <dd><a href="../1999/">1999</a></dd>
      <dd><a href="../1998/">1998</a></dd>
      <dd><a href="../1997/">1997</a></dd>
      <dt>Entertainments</dt>
      <dd><a href="../2003/picky/">Picky Picky Game</a></dd>
      <dd><a href="../tarot/">Alleged Tarot 2002</a></dd>
      <dd><a href="../2001/xmas-n.html">2001 Xmas card (SVG)</a></dd>
      <dd><a href="../how-tall-are-you/">How tall are you? quiz</a></dd>
      <dd><a href="http://caption.org/2000/pdc/">My Fabulous Life (2000)</a></dd>
      <dt>Photo albums</dt>
      <dd><a href="../2003/mull/">Mull (2003)</a></dd>
      <dd><a href="../2002/maymorning/">May Morning (2002)</a></dd>
      <dd><a href="../aviemore/">Aviemore (1999)</a></dd>
      <dd><a href="../bologna/">Bologna (1998)</a></dd>
      <dd><a href="../roch/">Roch Castle (1998)</a></dd>
      <dd><a href="http://caption.org/1997/pdc/">CAPTION97</a></dd>
      <dd><a href="http://caption.org/1996/pdc/">CAPTION96</a></dd>
      <dt><a title="Link to an XML summary in RSS 2.0 format" href="../rss091.xml" type="text/xml">XML</a></dt>
      <dt><a title="Check this page for conformance to XHTML 1.0" href="http://validator.w3.org/check/referer">Valid XHTML 1.0!</a></dt>
    </dl>
  </body>
</html>

